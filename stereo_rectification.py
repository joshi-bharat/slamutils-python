#!/usr/bin/python

import cv2
import numpy as np

np.set_printoptions(suppress=True)


def find_matrices():

    # EUROC
    # K1 = np.array([[458.654880721, 0.0, 367.215803962 ],
    #       [0.0, 457.296696463, 248.37534060980727 ],
    #       [0.0, 0.0, 1.0]])
    # K2 = np.array([[457.5874266035361, 0.0, 379.9994465203525],
    #       [0.0, 456.13442556023665, 255.2381853862733],
    #       [0.0, 0.0, 1.0]])
    # D1 = np.array([-0.28340811217029355, 0.07395907389290132, 0.00019359502856909603, 1.7618711454538528e-05, 0.0])
    # D2 = np.array([-0.283683654496, 0.0745128430929, -0.000104738949098, -3.55590700274e-05, 0.0])
    #
    # R = np.array([[0.999997256477881, 0.002312067192424, 3.76008102415583e-04],
    #               [-0.002317135723281, 0.999898048506644, 0.014089835846648],
    #               [-3.433931205241644e-04, -0.014090668452715, 0.999900662637728]])
    #
    # T = np.array([-0.110073808127187, 3.99121547014141e-04, -8.5370250335804e-04])
    # Size = (752, 480)

    # TUM-VI
    # K1 = np.array([[190.97847715128717, 0.0, 254.93170605935475],
    #                [0.0, 190.9733070521226, 256.8974428996504],
    #                [0.0, 0.0, 1.0]])
    # K2 = np.array([[190.44236969414825, 0.0, 252.59949716835982],
    #                 [0.0, 190.4344384721956, 254.91723064636983],
    #                 [0.0, 0.0, 1.0]])
    # # D1 = np.array([0.0034823894022493434, 0.0007150348452162257, -0.0020532361418706202, 0.00020293673591811182])
    # # D2 = np.array([0.0034003170790442797, 0.001766278153469831, -0.00266312569781606, 0.0003299517423931039])
    #
    # D1 = np.array([0.0, 0.0, 0.0, 0.0, 0.0])
    # D2 = np.array([0.0, 0.0, 0.0, 0.0, 0.0])
    #
    # R = np.array([[0.9999994457734953, -0.0008233639921576076, -0.0006561436136444361],
    #               [0.0007916877528168117, 0.9988994619156757, -0.04689603624058988],
    #               [0.0006940340102242531, 0.04689549078870055, 0.9988995601463054]])
    #
    # T = np.array([-0.10106110275180535, -0.0019764575873431013, -0.0011756424802046581])
    # Size = (512, 512)

    # Stereo Rig
    # K1 = np.array([[1167.87421447215, 0.0, 771.763112280329],
    #        [0.0, 1166.9553764645004, 589.9626482585169],
    #        [0.0, 0.0, 1.0]])
    # K2 = np.array([[1165.9493476066016, 0.0, 752.2788466729131],
    #       [0.0, 1167.2556820541186, 580.9613365661235],
    #       [0.0, 0.0, 1.0]])
    # D1 = np.array([-0.16610165879624592, 0.1156504557423161, -5.9407782773707644e-05, 0.0018508320481282106 ])
    # D2 = np.array([-0.17863115239034907, 0.13121795689445712, -6.741741965147593e-05, -0.002580879117584875])
    #
    # R = np.array([[0.9988191100312414, -0.03265399666204582, 0.03597362837397884],
    #               [0.03269879251375563, 0.9994650352692684, -0.0006574513953816636],
    #               [-0.03593291533589216, 0.0018329692277916023, 0.9993525232965935]])
    #
    # T = np.array([-0.23174740248476278, -0.003182895078150309, 0.002501637070923825])
    # Size = (1600, 1200)

    # #Stereo Rig 2
    # K1 = np.array([[1156.5188534683703, 0.0, 763.2083316463371],
    #        [0.0, 1156.5772666173266, 617.2779853849335],
    #        [0.0, 0.0, 1.0]])
    # K2 = np.array([[1158.625855755729, 0.0, 765.5609812846063],
    #       [0.0, 1156.0604864187183, 588.6683184401453],
    #       [0.0, 0.0, 1.0]])
    # D1 = np.array([-0.17473019446863114, 0.10643290428040156, 0.005210777878907861, -0.00028664918860079295])
    # D2 = np.array([-0.173831269260396, 0.10747272137157605, 0.004231076633773206, -0.0026692219494915187])

    # R = np.array([[0.9999844628195688, 0.001457338892457935, 0.005380546701481521],
    #               [-0.0014741831084051932, 0.9999940213716665, 0.003127939430629605],
    #               [-0.005375956065407064, -0.0031358227423316097, 0.999980632668506]])

    # T = np.array([-0.13893451786105684, 0.0008113329400986262, 9.18232813713922e-05])
    # Size = (1600, 1200)

    # Aqua
    # K1 = np.array([[1138.83276975408, 0.0, 308.1729373830466],
    #                [0.0, 1139.594698074792,  317.1289738266081],
    #                [0.0, 0.0, 1.0]])
    # K2 = np.array([[1138.6334240599165, 0.0, 320.1812627366363],
    #                [0.0, 1138.774613252216, 302.906549415305],
    #                [0.0, 0.0, 1.0]])
    # D1 = np.array([-0.16289394362063583, 0.08351833356682732,
    #               0.012276483503048642, 0.0006858966792660155])
    # D2 = np.array([-0.16234962118670349, 0.08155626136084612,
    #               0.006298812391653791, -0.003038632652138194])

    # R = np.array([[0.9987979596211392, 0.03408727796427398, 0.03522347708049325],
    #               [-0.03493974366234234, 0.9991041691888365, 0.0238762103839549],
    #               [-0.034378047784356804, -0.025078209475068048, 0.9990942063889998]])

    # T = np.array(
    #     [-0.0917754438229044, 0.005385621624085515, -0.0008669897458275737])
    # Size = (800, 600)

    # Stereo Rig Low Resolution
    #
    # K1 = np.array([[578.259426734, 0.0, 381.604165823],
    #        [0.0, 578.288633309,  308.638992692],
    #        [0.0, 0.0, 1.0]])
    # K2 = np.array([[579.312927878, 0.0, 382.780490642],
    #       [0.0, 578.030243209,  294.33415922],
    #       [0.0, 0.0, 1.0]])
    # D1 = np.array([-0.17473019446863114, 0.10643290428040156, 0.005210777878907861, -0.00028664918860079295])
    # D2 = np.array([-0.173831269260396, 0.10747272137157605, 0.004231076633773206, -0.0026692219494915187])
    #
    # R = np.array([[0.9999844628195688, 0.001457338892457935, 0.005380546701481521],
    #               [-0.0014741831084051932, 0.9999940213716665, 0.003127939430629605],
    #               [-0.005375956065407064, -0.0031358227423316097, 0.999980632668506]])
    #
    # T = np.array([-0.13893451786105684, 0.0008113329400986262, 9.18232813713922e-05])
    # Size = (800, 600)
    #

   # Aqua Low Resolution
    K1 = np.array([[569.416384875, 0.0, 354.08646869],
                   [0.0, 569.7973490352,  308.564486915],
                   [0.0, 0.0, 1.0]])
    K2 = np.array([[569.31671203, 0.0, 360.09063137],
                   [0.0, 569.387306625, 301.45327471],
                   [0.0, 0.0, 1.0]])
    D1 = np.array([-0.16289394362063583, 0.08351833356682732,
                  0.012276483503048642, 0.0006858966792660155])
    D2 = np.array([-0.16234962118670349, 0.08155626136084612,
                  0.006298812391653791, -0.003038632652138194])

    R = np.array([[0.9987979596211392, 0.03408727796427398, 0.03522347708049325],
                  [-0.03493974366234234, 0.9991041691888365, 0.0238762103839549],
                  [-0.034378047784356804, -0.025078209475068048, 0.9990942063889998]])

    T = np.array(
        [-0.0917754438229044, 0.005385621624085515, -0.0008669897458275737])
    Size = (800, 600)

    # New Stereo Rig Calibration from Mexico 2022
    # K1 = np.array([[1149.52000993, 0.0, 798.75530924],
    #                [0.0, 1150.57923685,  577.20248548],
    #                [0.0, 0.0, 1.0]])
    # K2 = np.array([[1151.2674512, 0.0, 782.44896179],
    #                [0.0, 1148.87177954, 573.73883587],
    #                [0.0, 0.0, 1.0]])
    # D1 = np.array([-0.16012168, 0.1020015, 0.00369027, 0.0034287, 0.0])
    # D2 = np.array([-0.14726897, 0.08035029, -0.00216681, 0.00125576, 0.0])

    # R = np.array([[0.9999531274148135, -0.0024947708286728633, 0.009355163912669094],
    #               [0.0022038626034325114, 0.99951762419007, 0.030978410595931],
    #               [-0.009427935242973135, -0.030956341061845496, 0.9994762723472247]])

    # T = np.array([-0.1422002, 0.00018052, -0.00134952])
    # Size = (1600, 1200)

    result = cv2.stereoRectify(cameraMatrix1=K1, cameraMatrix2=K2,  distCoeffs1=D1,
                               distCoeffs2=D2, imageSize=Size,  R=R, T=T, flags=cv2.CALIB_ZERO_DISPARITY, alpha=0)

    print(result[0])
    print(result[1])
    print(result[2])
    print(result[3])
    print(result[4])


if __name__ == '__main__':

    find_matrices()
